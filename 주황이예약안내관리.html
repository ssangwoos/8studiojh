<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ì´íŠ¸ìŠ¤íŠœë””ì˜¤ì£¼í™© ì˜ˆì•½ í˜„í™©</title>
    <style>
        /* ========== CSS ìŠ¤íƒ€ì¼ (ë°˜ì‘í˜• ì ìš©) ========== */
        * { /* ëª¨ë“  ìš”ì†Œì— box-sizing ì ìš© (padding/borderê°€ ë„ˆë¹„ì— í¬í•¨ë¨) */
            box-sizing: border-box;
        }
        body { font-family: sans-serif; padding: 10px; font-size: 14px; background-color: #f8f9fa; margin: 0;} /* body ê¸°ë³¸ ë§ˆì§„ ì œê±° */
        .container { max-width: 800px; margin: 15px auto; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #ff6f00; margin-bottom: 30px; font-size: 1.8em; }
        h3 { color: #e65100; margin-top: 0;}
        .section { margin-bottom: 25px; }
        .section h2 { border-bottom: 2px solid #ffcc80; padding-bottom: 8px; font-size: 1.2em; color: #333; }
        label { font-weight: bold; margin-right: 8px; }
        input[type="date"] { padding: 8px 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 1em; height: 38px; /* ë²„íŠ¼ê³¼ ë†’ì´ ìœ ì‚¬í•˜ê²Œ */}
        button { padding: 9px 18px; cursor: pointer; background-color: #ff9800; color: white; border: none; border-radius: 4px; font-size: 0.95em; transition: background-color 0.2s; vertical-align: middle; /* ë‹¤ë¥¸ ìš”ì†Œì™€ ì„¸ë¡œ ì •ë ¬ */}

        /* --- ë‚ ì§œ ì„ íƒ ì„¹ì…˜ ë°˜ì‘í˜• --- */
        .date-picker-section {
            display: flex;      /* Flexbox ì ìš© */
            flex-wrap: wrap;    /* ì‘ì€ í™”ë©´ì—ì„œ ì¤„ë°”ê¿ˆ í—ˆìš© */
            align-items: center;/* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
            gap: 10px;          /* ìš”ì†Œ ì‚¬ì´ ê°„ê²© */
        }
        .date-picker-section label { margin-right: 0; } /* gap ì‚¬ìš© ì‹œ ë¶ˆí•„ìš” */
        .date-picker-section input[type="date"] { flex-grow: 1; min-width: 150px; } /* ë„ˆë¹„ ìœ ì—°í•˜ê²Œ */
        .date-picker-section button { flex-shrink: 0; } /* ë²„íŠ¼ ì¤„ì–´ë“¤ì§€ ì•Šê²Œ */


        ul { list-style: none; padding-left: 0; }
        li.booking-item {
            border: 1px solid #eee; padding: 12px 18px; margin-bottom: 8px; cursor: pointer;
            background-color: #fff; transition: background-color 0.2s, border-left-color 0.2s;
            border-radius: 4px; border-left: 3px solid transparent;
        }
        li.booking-item:hover { background-color: #fff3e0; }
        li.booking-item.selected { background-color: #fff3e0; border-left: 3px solid #ff9800; font-weight: bold;}

        /* --- ìƒì„¸ ì •ë³´ ì˜ì—­ --- */
        #booking-details {
            margin-top: 30px; padding: 25px; border: 1px solid #ffe0b2;
            background-color: #fffaf0; border-radius: 5px; display: none;
        }
        #booking-details p { margin: 10px 0; line-height: 1.7; color: #444; }
        #booking-details strong { display: inline-block; min-width: 95px; color: #555; font-weight: 600;}

        /* --- ìƒì„¸ ì •ë³´ í•˜ë‹¨ ë²„íŠ¼ --- */
        #detail-actions {
            margin-top: 20px; border-top: 1px solid #eee; padding-top: 18px; text-align: center;
            display: flex; /* Flexbox ì ìš© */
            justify-content: center; /* ê°€ìš´ë° ì •ë ¬ */
            flex-wrap: wrap; /* ë²„íŠ¼ ë§ì•„ì§€ë©´ ì¤„ë°”ê¿ˆ */
            gap: 10px; /* ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
        }
        #detail-actions button { background-color: #ffa726; margin: 0; } /* ê°œë³„ ë§ˆì§„ ì œê±° (gap ì‚¬ìš©) */
        #detail-actions button:hover { background-color: #ff9800; }

        /* --- ì•ˆë‚´ë¬¸ ì¶œë ¥ ì˜ì—­ --- */
        #message-output-section { margin-top: 30px; display: none; }
        #message-output-area { width: 100%; /* ë¶€ëª¨ ë„ˆë¹„ì— ë§ì¶¤ */ font-size: 0.95em; padding: 10px; border: 1px solid #ccc; border-radius: 4px; line-height: 1.6; }
        #copy-message-button { background-color: #607d8b; }
        #copy-message-button:hover { background-color: #546e7a; }
        #copy-feedback-msg { margin-left: 10px; color: green; font-weight: bold;}

        /* --- ë¡œë”© ì¸ë””ì¼€ì´í„° --- */
        #loading { display: none; padding: 15px; background-color: #fffde7; border: 1px solid #fff9c4; border-radius: 4px; margin-bottom: 15px; text-align: center; color: #555; }


        /* ======================================== */
        /* ========== ë¯¸ë””ì–´ ì¿¼ë¦¬ (ëª¨ë°”ì¼) ========== */
        /* ======================================== */
        @media (max-width: 600px) { /* í™”ë©´ ë„ˆë¹„ 600px ì´í•˜ì¼ ë•Œ ì ìš© */
            body { font-size: 15px; padding: 5px; } /* ëª¨ë°”ì¼ ê¸°ë³¸ ê¸€ì í¬ê¸°/íŒ¨ë”© ì¡°ì • */
            .container { padding: 15px; margin: 10px auto; } /* ì»¨í…Œì´ë„ˆ íŒ¨ë”© ì¡°ì • */
            h1 { font-size: 1.6em; margin-bottom: 20px; }

            .date-picker-section { gap: 8px; } /* ëª¨ë°”ì¼ì—ì„œ ê°„ê²© ì•½ê°„ ì¤„ì„ */
            .date-picker-section input[type="date"] { min-width: 130px; } /* ë‚ ì§œ ì„ íƒ ìµœì†Œ ë„ˆë¹„ ì¡°ì • */

            li.booking-item { padding: 10px 12px; } /* ë¦¬ìŠ¤íŠ¸ í•­ëª© íŒ¨ë”© ì¡°ì • */

            #booking-details { padding: 15px; }
            #booking-details p { margin: 8px 0; line-height: 1.6; }
            #booking-details strong {
                min-width: auto; /* ìµœì†Œ ë„ˆë¹„ ì œê±° */
                display: block; /* ë ˆì´ë¸”ì„ ìœ„ë¡œ ì˜¬ë¦¼ */
                margin-bottom: 2px; /* ê°’ê³¼ì˜ ê°„ê²© */
                font-size: 0.9em;
                color: #666;
            }

            /* ìƒì„¸ ì •ë³´ í•˜ë‹¨ ë²„íŠ¼ ì„¸ë¡œ ìŒ“ê¸° */
            #detail-actions {
                flex-direction: column; /* ì„¸ë¡œ ë°©í–¥ìœ¼ë¡œ ë³€ê²½ */
                align-items: stretch; /* ë²„íŠ¼ ë„ˆë¹„ 100%ë¡œ ëŠ˜ë¦¼ */
                gap: 8px; /* ì„¸ë¡œ ê°„ê²© */
            }
            #detail-actions button {
                width: 100%; /* ë²„íŠ¼ ë„ˆë¹„ ê½‰ ì±„ì›€ */
                padding: 12px 15px; /* ë²„íŠ¼ í¬ê¸° í‚¤ì›Œì„œ ëˆ„ë¥´ê¸° ì‰½ê²Œ */
                font-size: 1em;
            }

            #message-output-area { font-size: 1em; }
            #copy-message-button { width: 100%; margin-top: 5px; } /* ë³µì‚¬ ë²„íŠ¼ë„ ë„ˆë¹„ 100% */
        }

    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŠ ì—ì´íŠ¸ìŠ¤íŠœë””ì˜¤ì£¼í™© ì˜ˆì•½ í˜„í™© ğŸŠ</h1>

        <div class="section">
            <label for="date-picker">ë‚ ì§œ ì„ íƒ:</label>
            <input type="date" id="date-picker">
            <button onclick="fetchBookings()">ì¡°íšŒ</button>
        </div>

        <div id="loading">ğŸ”„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>

        <div class="section" id="today-section" style="display: none;">
            <h2>
                <span id="selected-date-label"></span>
                (<span id="selected-dow-label"></span>)
                ì˜¤ëŠ˜ ì´ìš© ëª©ë¡
            </h2>
            <ul id="today-list"></ul>
        </div>

        <div class="section" id="tomorrow-section" style="display: none;">
            <h2>
                <span id="next-date-label"></span>
                (<span id="next-dow-label"></span>)
                ë‚´ì¼ ì´ìš© ëª©ë¡
            </h2>
            <ul id="tomorrow-list"></ul>
        </div>

        <div id="booking-details" style="display: none;">
            <h3>ì„ íƒëœ ì˜ˆì•½ ìƒì„¸ ì •ë³´</h3>
            <p><strong>ì˜ˆì•½ìëª…:</strong> <span id="detail-name"></span></p>
            <p><strong>ì—°ë½ì²˜:</strong> <span id="detail-phone"></span></p>
            <p><strong>ì´ìš©ì¼:</strong> <span id="detail-date"></span> (<span id="detail-dow"></span>)</p>
            <p><strong>ì´ìš©ì‹œê°„:</strong> <span id="detail-start-time"></span> ~ <span id="detail-end-time"></span> (<span id="detail-duration"></span>)</p>
            <p><strong>ì´ìš©ì¸ì›:</strong> <span id="detail-people"></span></p>
            <p><strong>ì´¬ì˜ìš©ë„:</strong> <span id="detail-purpose"></span></p>
            <p><strong>ì´ì•¡:</strong> <span id="detail-amount"></span></p>
            <p><strong>ì˜ˆì•½ì‚¬ì´íŠ¸:</strong> <span id="detail-site"></span></p>


            <div id="detail-actions" style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px; text-align: center;">
                 <button id="btn-confirm-guide" style="margin: 5px;">ì˜ˆì•½í™•ì •ì•ˆë‚´</button>
                 <button id="btn-tomorrow-guide" style="margin: 5px;">ë‚´ì¼ì´ìš©ì•ˆë‚´</button>
                 <button id="btn-complete-guide" style="margin: 5px;">ì´ìš©ì™„ë£Œì•ˆë‚´</button>
            </div>
        </div> 
        <div id="message-output-section" class="section" style="display: none; margin-top: 30px;">
            <h3>ìƒì„±ëœ ì•ˆë‚´ë¬¸</h3>
            <textarea id="message-output-area" rows="15" style="width: 98%; font-size: 0.95em; padding: 10px; border: 1px solid #ccc; border-radius: 4px;" readonly></textarea>
            <div style="text-align: right; margin-top: 10px;">
                 <button id="copy-message-button" onclick="copyGeneratedMessage()">ì•ˆë‚´ë¬¸ ë³µì‚¬</button>
                 <span id="copy-feedback-msg" style="margin-left: 10px; color: green;"></span>
            </div>
        </div>

    </div>    <script>
        // !!! ì—¬ê¸°ì— Google Apps Script ì›¹ ì•± URLì„ ì •í™•íˆ ë¶™ì—¬ë„£ìœ¼ì„¸ìš” !!!
        const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxR_c6yX2cUp9TZ5Xr4b0w6-h-JQh1VJwhyskqlVs8FW1Zpcc4T5QEKKFBazaNMMPrkSA/exec'; // <<<---------- ì—¬ê¸°!!!

        // ì „ì—­ ë³€ìˆ˜
        let currentBookingsData = {};
        let selectedListItem = null; // í˜„ì¬ ì„ íƒ(ê°•ì¡°)ëœ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ
        let currentlyDisplayedBookingIndex = null; // í˜„ì¬ ìƒì„¸ ì •ë³´ê°€ í‘œì‹œëœ ì˜ˆì•½ì˜ rowIndex
        let currentlyDisplayedListType = null; // í˜„ì¬ ìƒì„¸ ì •ë³´ê°€ í‘œì‹œëœ ë¦¬ìŠ¤íŠ¸ íƒ€ì… ('today' or 'tomorrow')

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì •
        document.addEventListener('DOMContentLoaded', () => {
            try {
                const today = new Date();
                document.getElementById('date-picker').value = formatDateForInput(today);
                console.log("í˜ì´ì§€ ë¡œë“œ: ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì • ì™„ë£Œ");
            } catch (error) {
                console.error("ì´ˆê¸° ë‚ ì§œ ì„¤ì • ì¤‘ ì˜¤ë¥˜:", error);
                alert("í˜ì´ì§€ ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ê°œë°œì ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”.");
            }
        });

        // Date ê°ì²´ë¥¼<y_bin_46>-MM-DD í˜•ì‹ìœ¼ë¡œ (input[type=date] ìš©)
        function formatDateForInput(date) {
            const yyyy = date.getFullYear();
            const mm = String(date.getMonth() + 1).padStart(2, '0');
            const dd = String(date.getDate()).padStart(2, '0');
            return `${yyyy}-${mm}-${dd}`;
        }

        // ì˜ˆì•½ ì •ë³´ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
        async function fetchBookings() {
            console.log("'ì¡°íšŒ' ë²„íŠ¼ í´ë¦­ë¨");
            const selectedDate = document.getElementById('date-picker').value;
            if (!selectedDate) {
                alert('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            showLoading(true);
            hideResultsAndDetails();

            try {
                console.log(`Apps Script í˜¸ì¶œ: ${WEB_APP_URL}?date=${selectedDate}`);
                const response = await fetch(`${WEB_APP_URL}?date=${selectedDate}`);
                console.log("Apps Script ì‘ë‹µ ìƒíƒœ:", response.status);

                if (!response.ok) {
                    let errorText = `HTTP ì˜¤ë¥˜! ìƒíƒœ: ${response.status}`;
                    try {
                        const text = await response.text();
                        console.error("ì„œë²„ ì‘ë‹µ í…ìŠ¤íŠ¸:", text);
                        errorText += `\nì‘ë‹µ: ${text.substring(0, 200)}`;
                    } catch (e) {}
                    throw new Error(errorText);
                }

                const data = await response.json();
                console.log("Apps Scriptë¡œë¶€í„° ë°›ì€ ë°ì´í„°:", data);

                if (data.error) {
                    throw new Error(`ì„œë²„ ì˜¤ë¥˜: ${data.error}`);
                }

                currentBookingsData = data;
                displayResults(data);

            } catch (error) {
                console.error('ì˜ˆì•½ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨:', error);
                alert(`ì˜ˆì•½ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:\n${error.message}\n\n(ìì„¸í•œ ë‚´ìš©ì€ F12 ê°œë°œì ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”)`);
            } finally {
                showLoading(false);
            }
        }

        // ë¡œë”© í‘œì‹œ/ìˆ¨ê¹€
        function showLoading(isLoading) {
            document.getElementById('loading').style.display = isLoading ? 'block' : 'none';
        }

        // ê²°ê³¼ ì˜ì—­ ë° ìƒì„¸/ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
        function hideResultsAndDetails() {
            document.getElementById('today-section').style.display = 'none';
            document.getElementById('tomorrow-section').style.display = 'none';
            document.getElementById('booking-details').style.display = 'none';
            document.getElementById('message-output-section').style.display = 'none'; // ë©”ì‹œì§€ ì˜ì—­ ìˆ¨ê¸°ê¸°
            document.getElementById('today-list').innerHTML = '';
            document.getElementById('tomorrow-list').innerHTML = '';
             if (selectedListItem) {
                selectedListItem.classList.remove('selected');
                selectedListItem = null;
            }
            currentlyDisplayedBookingIndex = null;
            currentlyDisplayedListType = null;
            document.getElementById('copy-feedback-msg').textContent = '';
        }

        // ì˜ˆì•½ ê²°ê³¼ í™”ë©´ì— í‘œì‹œ
        function displayResults(data) {
            const todayList = document.getElementById('today-list');
            const tomorrowList = document.getElementById('tomorrow-list');

            document.getElementById('selected-date-label').textContent = data.selectedDate;
            document.getElementById('selected-dow-label').textContent = data.selectedDayOfWeek;
            document.getElementById('next-date-label').textContent = data.nextDate;
            document.getElementById('next-dow-label').textContent = data.nextDayOfWeek;

            todayList.innerHTML = '';
            tomorrowList.innerHTML = '';

            if (data.todayBookings.length === 0) {
                todayList.innerHTML = '<li>ì˜¤ëŠ˜ ì´ìš© ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤.</li>';
            } else {
                data.todayBookings.forEach((booking, index) => {
                    const li = createBookingListItem(booking, 'today', index);
                    todayList.appendChild(li);
                });
            }

            if (data.tomorrowBookings.length === 0) {
                tomorrowList.innerHTML = '<li>ë‚´ì¼ ì´ìš© ì˜ˆì•½ì´ ì—†ìŠµë‹ˆë‹¤.</li>';
            } else {
                data.tomorrowBookings.forEach((booking, index) => {
                     const li = createBookingListItem(booking, 'tomorrow', index);
                    tomorrowList.appendChild(li);
                });
            }

            document.getElementById('today-section').style.display = 'block';
            document.getElementById('tomorrow-section').style.display = 'block';
        }

        // ì˜ˆì•½ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ(li) ìƒì„± í•¨ìˆ˜
        function createBookingListItem(booking, listType, index) {
             const li = document.createElement('li');
             li.className = 'booking-item';
             li.textContent = `${booking.startTime || 'ì‹œê°„ë¯¸ì •'} - ${booking.name}`;
             li.dataset.listType = listType;
             li.dataset.rowIndex = booking.rowIndex || index;
             li.onclick = handleItemClick;
             return li;
        }

        // ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ í´ë¦­ ì²˜ë¦¬ í•¨ìˆ˜ (í† ê¸€ ê¸°ëŠ¥)
        function handleItemClick(event) {
            const clickedLi = event.currentTarget;
            const listType = clickedLi.dataset.listType;
            const rowIndex = clickedLi.dataset.rowIndex;
            let bookingData = null;
            const sourceList = (listType === 'today') ? currentBookingsData.todayBookings : currentBookingsData.tomorrowBookings;
            bookingData = sourceList.find(b => b.rowIndex && b.rowIndex.toString() === rowIndex.toString()); // rowIndex ì¡´ì¬ ë° ë¹„êµ

            if (!bookingData) {
                 console.error("í´ë¦­ëœ í•­ëª©ì˜ ì˜ˆì•½ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", listType, rowIndex);
                 return;
            }

            const isAlreadyDisplayed = (currentlyDisplayedListType === listType && currentlyDisplayedBookingIndex && currentlyDisplayedBookingIndex.toString() === rowIndex.toString());
            const detailsSection = document.getElementById('booking-details');
            const messageSection = document.getElementById('message-output-section');

            if (isAlreadyDisplayed && detailsSection.style.display === 'block') {
                detailsSection.style.display = 'none';
                messageSection.style.display = 'none';
                currentlyDisplayedBookingIndex = null;
                currentlyDisplayedListType = null;
                if (selectedListItem) { selectedListItem.classList.remove('selected'); selectedListItem = null; }
                console.log("ìƒì„¸ ì •ë³´ ë‹«í˜:", rowIndex);
            } else {
                console.log("ìƒì„¸ ì •ë³´ ì—´ê¸°/ì—…ë°ì´íŠ¸:", rowIndex);
                if (selectedListItem) { selectedListItem.classList.remove('selected'); }
                clickedLi.classList.add('selected');
                selectedListItem = clickedLi;
                showBookingDetails(bookingData);
                currentlyDisplayedBookingIndex = bookingData.rowIndex;
                currentlyDisplayedListType = listType;
                messageSection.style.display = 'none'; // ìƒˆ í•­ëª© ì—´ ë•ŒëŠ” ë©”ì‹œì§€ ì˜ì—­ ìˆ¨ê¹€
                document.getElementById('copy-feedback-msg').textContent = '';
            }
        }

        // ì˜ˆì•½ ìƒì„¸ ì •ë³´ í‘œì‹œ í•¨ìˆ˜ (ì´ìš©ì¸ì› í¬ë§·, ë²„íŠ¼ ë¦¬ìŠ¤ë„ˆ í¬í•¨)
        function showBookingDetails(booking) {
             console.log("ìƒì„¸ ì •ë³´ í‘œì‹œ í•¨ìˆ˜ í˜¸ì¶œë¨:", booking);
            const display = (value) => (value !== null && value !== "" && value !== undefined) ? value : '-';

            // ì´ìš©ì¸ì› í¬ë§· ìˆ˜ì •: ìˆ«ì ë’¤ì— "ì¸" ì¶”ê°€
            const peopleValue = booking.people; // ì›ë³¸ ê°’ ì‚¬ìš©
             const peopleText = (peopleValue !== null && peopleValue !== "" && !isNaN(parseInt(peopleValue)))
                             ? `${parseInt(peopleValue)}ì¸` // "ì¸" ì¶”ê°€
                             : '-';

            // ìƒì„¸ ì •ë³´ í•„ë“œ ì±„ìš°ê¸°
            document.getElementById('detail-name').textContent = display(booking.name);
            document.getElementById('detail-phone').textContent = display(booking.phone);
            document.getElementById('detail-date').textContent = display(booking.date);
            document.getElementById('detail-dow').textContent = display(booking.dayOfWeek);
            document.getElementById('detail-start-time').textContent = display(booking.startTime);
            document.getElementById('detail-end-time').textContent = display(booking.endTime);
            document.getElementById('detail-duration').textContent = display(booking.duration);
            document.getElementById('detail-people').textContent = peopleText; // ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ ì ìš©
            document.getElementById('detail-purpose').textContent = display(booking.purpose);
            document.getElementById('detail-amount').textContent = display(booking.amount);
            document.getElementById('detail-site').textContent = display(booking.site);

            // ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
            const confirmBtn = document.getElementById('btn-confirm-guide');
            const tomorrowBtn = document.getElementById('btn-tomorrow-guide');
            const completeBtn = document.getElementById('btn-complete-guide');
            confirmBtn.onclick = () => handleConfirmGuideClick(booking);
            tomorrowBtn.onclick = () => handleTomorrowGuideClick(booking);
            completeBtn.onclick = () => handleCompleteGuideClick(booking);
            console.log("ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²° ì™„ë£Œ");

            // ìƒì„¸ ì •ë³´ ì„¹ì…˜ ë³´ì´ê¸°
            const detailsSection = document.getElementById('booking-details');
            detailsSection.style.display = 'block';
        }


        // ========== ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë“¤ ==========

        // ì˜ˆì•½í™•ì •ì•ˆë‚´ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬
        function handleConfirmGuideClick(booking) {
            console.log("ì˜ˆì•½í™•ì •ì•ˆë‚´ ë²„íŠ¼ í´ë¦­:", booking);

            // display í•¨ìˆ˜ë¥¼ ì—¬ê¸°ì„œë„ ì‚¬ìš©
            const display = (value) => (value !== null && value !== "" && value !== undefined) ? value : '-';

           const displayDate = display(booking.date);

            // ì´ìš©ì¸ì› í¬ë§· (ìˆ«ì+'ì¸')
            const peopleValue = booking.people;
            const peopleText = (peopleValue !== null && peopleValue !== "" && !isNaN(parseInt(peopleValue)))
                             ? `${parseInt(peopleValue)}ì¸`
                             : '-';
		
            // *** ì´ ì´ìš©ì‹œê°„ í¬ë§·: ìƒì„¸ ì •ë³´ì™€ ë™ì¼í•˜ê²Œ 'HH:mm ì‹œê°„' ì‚¬ìš© ***// 
          const durationText = display(booking.duration);

            // ì•ˆë‚´ ë©”ì‹œì§€ í…œí”Œë¦¿ (Template Literal ì‚¬ìš©)
            const message = `<<ì˜ˆì•½í™•ì • ì•ˆë‚´>>
ì•ˆë…•í•˜ì„¸ìš” ${display(booking.name)}ë‹˜
ì—ì´íŠ¸ìŠ¤íŠœë””ì˜¤ ì£¼í™© ì…ë‹ˆë‹¤.
ì €í¬ ìŠ¤íŠœë””ì˜¤ë¥¼ ì„ íƒí•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤
ì˜ˆì•½í™•ì • ì•ˆë‚´ ë§ì”€ë“œë ¤ìš”:)

â–¡ì£¼ì†Œ : ê´‘ì§„êµ¬ ë©´ëª©ë¡œ182, ì¤‘ì•™ë¹Œë”© 301í˜¸

â–¡ ì „ì²´ëŒ€ê´€(Aë£¸&Bë£¸)
â–¡ì¼ì‹œ : ${displayDate} (${display(booking.dayOfWeek)})
ì´ìš©ì‹œê°„ : ${display(booking.startTime)} - ${display(booking.endTime)} (${durationText})
ì´ìš©ì¸ì› : ${peopleText}
ì‚¬ìš©ëª©ì  : ${display(booking.purpose)}

â–¡ ì´ìš©ì¼ 1ì¼ ì „ì— ì¶œì… ê´€ë ¨ ì•ˆë‚´ì‚¬í•­ì´ ë°œì†¡ ë  ì˜ˆì •ì…ë‹ˆë‹¤.
â–¡ì—°ë½ì²˜ : 010.7521.8806
ì¹´ì¹´ì˜¤í†¡ : @ì—ì´íŠ¸ìŠ¤íŠœë””ì˜¤ì£¼í™©
ì¸ìŠ¤íƒ€ : @studios_joohwang

â–¡ ê¸°ë³¸ ì´ìš©ì•ˆë‚´ ë° ìœ ì˜ì‚¬í•­ : https://vvd.bz/eVQd
â–¡ ì£¼ì°¨ ì•ˆë‚´ â—† 1ëŒ€ ë¬´ë£Œì£¼ì°¨ ê°€ëŠ¥í•˜ë©°, ê±´ë¬¼ ì „ìš©ì£¼ì°¨ì¥ ì´ìš©ì„ ë¶€íƒë“œë¦½ë‹ˆë‹¤. â—† ì£¼ì°¨ì¥ ë§Œì°¨ ì‹œ ì¸ê·¼ ê³µì˜ì£¼ì°¨ì¥ ì´ìš© ë¶€íƒë“œë¦¬ë©°, ë¹„ìš©ì„ ì „ì•¡(1ëŒ€) ì§€ì›í•´ ë“œë¦½ë‹ˆë‹¤.`;

            // í…ìŠ¤íŠ¸ ìƒìì— ë©”ì‹œì§€ ë„£ê³  ë³´ì´ê²Œ í•˜ê¸°
            const outputArea = document.getElementById('message-output-area');
            const outputSection = document.getElementById('message-output-section');
            outputArea.value = message;
            outputSection.style.display = 'block';
            document.getElementById('copy-feedback-msg').textContent = '';

            // ë©”ì‹œì§€ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            outputSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // --- ë‚´ì¼ì´ìš©ì•ˆë‚´ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ (ìˆ˜ì •: ë©”ì‹œì§€ ìƒì„±) ---
        function handleTomorrowGuideClick(booking) {
            console.log("ë‚´ì¼ì´ìš©ì•ˆë‚´ ë²„íŠ¼ í´ë¦­:", booking);

            // display í•¨ìˆ˜ ì‚¬ìš© (null ë˜ëŠ” ë¹ˆ ê°’ '-' ì²˜ë¦¬)
            const display = (value) => (value !== null && value !== "" && value !== undefined) ? value : '-';

            // ì´ìš©ì¼ì/ìš”ì¼ (YYYY-MM-DD / ìš”ì¼) - booking ê°ì²´ ê°’ ê·¸ëŒ€ë¡œ ì‚¬ìš©
            const displayDate = display(booking.date);
            const displayDow = display(booking.dayOfWeek);

            // ì´ìš©ì¸ì› í¬ë§· (ìˆ«ì+'ì¸')
            const peopleValue = booking.people;
            const peopleText = (peopleValue !== null && peopleValue !== "" && !isNaN(parseInt(peopleValue)))
                             ? `${parseInt(peopleValue)}ì¸`
                             : '-';

             // *** ì´ ì´ìš©ì‹œê°„ í¬ë§· ìˆ˜ì •: ìƒì„¸ì •ë³´ì™€ ë™ì¼í•˜ê²Œ 'HH:mm ì‹œê°„' ì‚¬ìš© ***
            // ì´ì „ì˜ .replace(' ì‹œê°„', '') ì œê±°í•˜ê³  booking.duration ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©
            const durationText = display(booking.duration);

            // ì•ˆë‚´ ë©”ì‹œì§€ í…œí”Œë¦¿
            const message = `<<ì´ìš©ì•ˆë‚´>>
ì•ˆë…•í•˜ì„¸ìš” ${display(booking.name)}ë‹˜
ì—ì´íŠ¸ìŠ¤íŠœë””ì˜¤ ì£¼í™© ì…ë‹ˆë‹¤.
ë‚´ì¼ ì´ìš© ì•ˆë‚´ì‚¬í•­ ë§ì”€ë“œë ¤ìš”:)

â–¡ì£¼ì†Œ : ê´‘ì§„êµ¬ ë©´ëª©ë¡œ182, ì¤‘ì•™ë¹Œë”© 301í˜¸
â–¡ì „ì²´ëŒ€ê´€(Aë£¸&Bë£¸)
â–¡ì¼ì‹œ : ${displayDate} (${displayDow})
ì´ìš©ì‹œê°„: ${display(booking.startTime)} - ${display(booking.endTime)} (${durationText})
ì´ìš©ì¸ì›: ${peopleText}
ì‚¬ìš©ëª©ì : ${display(booking.purpose)}

â–¡ í˜„ê´€ ë¹„ë°€ë²ˆí˜¸ : 0654*
â–¡ Wifi ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ : Studios_joohwang2.4G / joohwang0321
â–¡ì—°ë½ì²˜ : 010.7521.8806 ì¹´ì¹´ì˜¤í†¡ : @ì—ì´íŠ¸ìŠ¤íŠœë””ì˜¤ì£¼í™© ì¸ìŠ¤íƒ€ : @studios_joohwang
â–¡ ê¸°ë³¸ ì´ìš©ì•ˆë‚´ ë° ìœ ì˜ì‚¬í•­ : https://vvd.bz/eVQd
â–¡ìŠ¤íŠœë””ì˜¤ ì „ì²´ ê¸ˆì—° êµ¬ì—­ì…ë‹ˆë‹¤. í¡ì—°ì€ 1ì¸µ ì™¸ë¶€ì—ì„œ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
â–¡ ì£¼ì°¨ ì•ˆë‚´
â—† 1ëŒ€ ë¬´ë£Œì£¼ì°¨ ê°€ëŠ¥í•˜ë©°, ê±´ë¬¼ ì „ìš©ì£¼ì°¨ì¥ ì´ìš©ì„ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
â—† ì£¼ì°¨ì¥ ë§Œì°¨ ì‹œ ì¸ê·¼ ê³µì˜ì£¼ì°¨ì¥ ì´ìš© ë¶€íƒë“œë¦¬ë©°, ë¹„ìš©ì„ ì „ì•¡(1ëŒ€) ì§€ì›í•´ ë“œë¦½ë‹ˆë‹¤.`;

            // í…ìŠ¤íŠ¸ ìƒìì— ë©”ì‹œì§€ ë„£ê³  ë³´ì´ê²Œ í•˜ê¸°
            const outputArea = document.getElementById('message-output-area');
            const outputSection = document.getElementById('message-output-section');
            outputArea.value = message;
            outputSection.style.display = 'block'; // ë©”ì‹œì§€ ì„¹ì…˜ ë³´ì´ê¸°
            document.getElementById('copy-feedback-msg').textContent = ''; // ë³µì‚¬ í”¼ë“œë°± ì´ˆê¸°í™”

            // ë©”ì‹œì§€ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            outputSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

// --- ì´ìš©ì™„ë£Œì•ˆë‚´ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ (ìˆ˜ì •: ë©”ì‹œì§€ ìƒì„±) ---
        function handleCompleteGuideClick(booking) {
            console.log("ì´ìš©ì™„ë£Œì•ˆë‚´ ë²„íŠ¼ í´ë¦­:", booking); // booking ê°ì²´ëŠ” ë¡œê¹…ìš© ë˜ëŠ” ì¶”í›„ í™•ì¥ìš©ìœ¼ë¡œ ë‚¨ê²¨ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

            // ì•ˆë‚´ ë©”ì‹œì§€ (ê³ ì • í…ìŠ¤íŠ¸)
            // Template Literal(ë°±í‹± `)ì„ ì‚¬ìš©í•˜ì—¬ ì¤„ë°”ê¿ˆ í¬í•¨
            const message = `ì•ˆë…•í•˜ì„¸ìš” ì—ì´íŠ¸ìŠ¤íŠœë””ì˜¤ ì£¼í™© ì…ë‹ˆë‹¤.

ê¸ˆì¼ ì´ìš©ì€ ì˜ í•˜ì…¨ëŠ”ì§€ìš”:)
ë‹¤ìŒì—ë„ ì¢‹ì€ ì´¬ì˜ ë˜ì‹¤ ìˆ˜ ìˆëŠ” ê³µê°„ìœ¼ë¡œ
ê±°ë“­ë‚˜ë„ë¡ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.

ì €í¬ ìŠ¤íŠœë””ì˜¤ë¥¼ ë°©ë¬¸í•´ì£¼ì…”ì„œ ë‹¤ì‹œ í•œ ë²ˆ ê°ì‚¬ë“œë¦¬ê³ , ë‚¨ì€ í•˜ë£¨ í–‰ë³µí•œ ì‹œê°„ë˜ì„¸ìš”:)â¤`;

            // í…ìŠ¤íŠ¸ ìƒìì— ë©”ì‹œì§€ ë„£ê³  ë³´ì´ê²Œ í•˜ê¸°
            const outputArea = document.getElementById('message-output-area');
            const outputSection = document.getElementById('message-output-section');
            outputArea.value = message; // ê³ ì • ë©”ì‹œì§€ ì„¤ì •
            outputSection.style.display = 'block'; // ë©”ì‹œì§€ ì„¹ì…˜ ë³´ì´ê¸°
            document.getElementById('copy-feedback-msg').textContent = ''; // ë³µì‚¬ í”¼ë“œë°± ì´ˆê¸°í™”

            // ë©”ì‹œì§€ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            outputSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // ìƒì„±ëœ ì•ˆë‚´ë¬¸ ë³µì‚¬ í•¨ìˆ˜
        function copyGeneratedMessage() {
            const messageText = document.getElementById('message-output-area').value;
            const feedback = document.getElementById('copy-feedback-msg');
            feedback.textContent = '';

            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(messageText)
                    .then(() => {
                        console.log('ì•ˆë‚´ë¬¸ ë³µì‚¬ ì„±ê³µ!');
                        feedback.textContent = 'âœ… ë³µì‚¬ ì™„ë£Œ!';
                        setTimeout(() => { feedback.textContent = ''; }, 2000);
                    })
                    .catch(err => {
                        console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                        feedback.textContent = 'âŒ ë³µì‚¬ ì‹¤íŒ¨';
                    });
            } else {
                console.warn('navigator.clipboard APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                feedback.textContent = 'âŒ ë³µì‚¬ ê¸°ëŠ¥ ë¯¸ì§€ì›';
            }
        }

    </script>


</body>
</html>